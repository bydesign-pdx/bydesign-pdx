jQuery("#noo_property_google_map_search_input").bind("keypress keydown keyup",function(a){if(a.keyCode==13){a.preventDefault()}});google.maps.event.addDomListener(window,"load",initialize);var geocoder;var map;var infowindow;var marker;var autocomplete;var directionsDisplay;var directionsService;function initialize(){geocoder=new google.maps.Geocoder();directionsDisplay=new google.maps.DirectionsRenderer({draggable:true});directionsService=new google.maps.DirectionsService();var a={center:new google.maps.LatLng(nooGoogleMap.latitude,nooGoogleMap.longitude),zoom:13,mapTypeId:google.maps.MapTypeId.ROADMAP};map=new google.maps.Map(document.getElementById("noo_property_google_map"),a);var b=document.getElementById("noo_property_google_map_search_input");autocomplete=new google.maps.places.Autocomplete(b);autocomplete.bindTo("bounds",map);infowindow=new google.maps.InfoWindow({position:map.getCenter()});directionsDisplay.setMap(map);directionsDisplay.setPanel(document.getElementById("route"));infowindow=new google.maps.InfoWindow({position:map.getCenter()});marker=new google.maps.Marker({map:map,position:new google.maps.LatLng(nooGoogleMap.latitude,nooGoogleMap.longitude),draggable:true});google.maps.event.addListener(map,"click",function(c){marker.setPosition(c.latLng);getMap(marker)});google.maps.event.addListener(autocomplete,"place_changed",function(){infowindow.close();var c=autocomplete.getPlace();if(c){if(c.geometry){if(c.geometry.viewport){map.fitBounds(c.geometry.viewport)}else{map.setCenter(c.geometry.location);map.setZoom(17)}marker.setPosition(c.geometry.location);var d="";if(c.address_components){d=[(c.address_components[0]&&c.address_components[0].short_name||""),(c.address_components[1]&&c.address_components[1].short_name||""),(c.address_components[2]&&c.address_components[2].short_name||"")].join(", ")}infowindow.setContent("<strong>"+c.name+"</strong><br>"+d);infowindow.open(map,marker);document.getElementById("_noo_property_gmap_latitude").value=c.geometry.location.lat();document.getElementById("_noo_property_gmap_longitude").value=c.geometry.location.lng()}}});google.maps.event.addListener(map,"idle",function(){google.maps.event.trigger(map,"resize")});drag(marker)}function setupClickListener(c,b){var a=document.getElementById(c);google.maps.event.addDomListener(a,"click",function(){autocomplete.setTypes(b)})}function clearOverlays(){marker.setMap(null);marker=null}function drag(a){google.maps.event.addListener(a,"drag",function(){getMap(a)})}function getMap(a){geocoder.geocode({latLng:a.getPosition()},function(c,b){if(b==google.maps.GeocoderStatus.OK){if(c[1]){var d=c[0].formatted_address;infowindow.setContent(d);infowindow.open(map,a);document.getElementById("_noo_property_gmap_latitude").value=a.getPosition().lat();document.getElementById("_noo_property_gmap_longitude").value=a.getPosition().lng()}}})};